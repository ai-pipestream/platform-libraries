# -----------------------------------------------------------------------
# QUARKUS TEST CONFIGURATION (Pipestream Common)
# -----------------------------------------------------------------------

# 1. Networking
# Use a random port for the test server to avoid colliding with
# the actual Apicurio Registry running on 8081
quarkus.http.test-port=0
quarkus.http.port=0

# 2. Disable Dev Services
# We are only testing CDI Config injection (HashMaps).
# We do not need to spin up Redpanda or Apicurio containers for these unit tests.
quarkus.kafka.devservices.enabled=false
quarkus.apicurio-registry.devservices.enabled=false
quarkus.datasource.devservices.enabled=false

# 3. Logging
quarkus.log.console.format=%d{HH:mm:ss} %-5p [%c{2.}] (%t) %s%e%n

# gRPC code generation configuration
quarkus.generate-code.grpc.scan-for-proto=none

# gRPC server configuration
quarkus.grpc.server.use-separate-server=false
quarkus.grpc.server.port=0
quarkus.grpc.server.test-port=0

# Test configuration
quarkus.test.native-image-profile=test

# Test logging
logging.level.com.rokkon.pipeline=DEBUG
logging.level.io.quarkus.arc=DEBUG

%test.quarkus.http.port=0